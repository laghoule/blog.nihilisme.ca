<!DOCTYPE html>
<html lang="ca-fr"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DoH &amp;&amp; DoT | SIG11</title>

    
  
    <link href="/favicon.ico" rel="icon" type="image/x-icon" />
  


<link rel="canonical" href="http://localhost:1313/posts/2019/dos-dot/" />



<meta name="author" content="Pascal Gauthier" />
<meta name="description" content="Experiementation avec DNS over HTTPS et DNS over TLS cette semaine. DoH est maintenant supporte par Firefox, et les prochaines version vont l&rsquo;activer par default, du moins c&rsquo;est ce qui avait ete annonce, jusqu&rsquo;a ce que ca creer un faux scandale au UK (https://www.theregister.co.uk/2019/09/24/mozilla_backtracks_doh_for_uk_users/ ). L&rsquo;avantage du support directement dans le browser viens du fait qu&rsquo;il possede son propre client DNS, ce qui permet de ne pas utiliser le resolver systeme. Donc si votre destination utilise HTTPS, c&rsquo;est tres dur de pouvoir vous espionnez, car l&rsquo;espion peux seulement voir l&rsquo;IP du destinataire.
" />


<meta name="keywords" content="Observation,Test,Technologie,Import 2023-04-08 17:32">



<meta name="generator" content="Hugo 0.151.0">


<meta property="og:url" content="http://localhost:1313/posts/2019/dos-dot/">
  <meta property="og:site_name" content="SIG11">
  <meta property="og:title" content="DoH && DoT">
  <meta property="og:description" content="Experiementation avec DNS over HTTPS et DNS over TLS cette semaine. DoH est maintenant supporte par Firefox, et les prochaines version vont l’activer par default, du moins c’est ce qui avait ete annonce, jusqu’a ce que ca creer un faux scandale au UK (https://www.theregister.co.uk/2019/09/24/mozilla_backtracks_doh_for_uk_users/ ). L’avantage du support directement dans le browser viens du fait qu’il possede son propre client DNS, ce qui permet de ne pas utiliser le resolver systeme. Donc si votre destination utilise HTTPS, c’est tres dur de pouvoir vous espionnez, car l’espion peux seulement voir l’IP du destinataire.">
  <meta property="og:locale" content="ca_fr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-11-12T14:58:29+00:00">
    <meta property="article:modified_time" content="2019-11-12T14:58:29+00:00">
    <meta property="article:tag" content="Observation">
    <meta property="article:tag" content="Test">
    <meta property="article:tag" content="Technologie">
    <meta property="article:tag" content="Import 2023-04-08 17:32">
    <meta property="og:image" content="http://localhost:1313/img/IMG_20180730_143710.jpg">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/img/IMG_20180730_143710.jpg">
  <meta name="twitter:title" content="DoH && DoT">
  <meta name="twitter:description" content="Experiementation avec DNS over HTTPS et DNS over TLS cette semaine. DoH est maintenant supporte par Firefox, et les prochaines version vont l’activer par default, du moins c’est ce qui avait ete annonce, jusqu’a ce que ca creer un faux scandale au UK (https://www.theregister.co.uk/2019/09/24/mozilla_backtracks_doh_for_uk_users/ ). L’avantage du support directement dans le browser viens du fait qu’il possede son propre client DNS, ce qui permet de ne pas utiliser le resolver systeme. Donc si votre destination utilise HTTPS, c’est tres dur de pouvoir vous espionnez, car l’espion peux seulement voir l’IP du destinataire.">




<link rel="stylesheet" href="/css/output.css" />




    


<style>
  pre {
    padding: 1em;
    overflow: auto;
  }
</style>









    

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js" integrity="sha256-4EHxtjnR5rL8JzbY12OKQJr81ESm7JBEb49ORPo29AY=" crossorigin="anonymous"></script>
  </head>

  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav x-data="{ isSticky: false }"
  x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })"
  class="sticky top-0 z-30 mt-4 lg:mt-8 py-4"
  :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }">

  
  <div class="container flex justify-between px-4">
  
    <section class="flex items-center gap-4">
      <div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title="Flip it!">
        <div class="h-10 rounded-full">
          <img src="/" alt="SIG11" />
        </div>
      </div>

      
      <div>
        
        <a href="http://localhost:1313/" class="text-lg font-semibold cursor-pointer">
          SIG11
        </a>
        
        
        <div class="text-base-content/60 text-sm">Observation, Experimentation et R&amp;D</div>
        
      </div>
      
    </section>

    
    

    <div class="dropdown dropdown-end sm:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square" aria-label="Select an option">
        <ion-icon name="menu" class="text-2xl"></ion-icon>
      </div>
      <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md">
        










<li>
  <a class="group inline-flex items-center p-2 cursor-pointer" href="/search" title="Search">
    <ion-icon name="search"></ion-icon>
    Search
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/index.xml" title="RSS">
    <ion-icon name="logo-rss"></ion-icon>
    RSS
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="Archives">
    <ion-icon name="archive"></ion-icon>
    Archives
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="All Categories">
    <ion-icon name="grid"></ion-icon>
    All Categories
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="All Tags">
    <ion-icon name="pricetags"></ion-icon>
    All Tags
  </a>
</li>






      </ul>
    </div>
    <section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4">
      

      
      





      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/search" title="Search">
  <ion-icon class="group-hover:text-primary-content" name="search"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/index.xml" title="RSS">
  <ion-icon class="group-hover:text-primary-content" name="logo-rss"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/posts" title="Archives">
  <ion-icon class="group-hover:text-primary-content" name="archive"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/categories" title="All Categories">
  <ion-icon class="group-hover:text-primary-content" name="grid"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/tags" title="All Tags">
  <ion-icon class="group-hover:text-primary-content" name="pricetags"></ion-icon>
</a>


      

      

      
    </section>
  </div>
</nav>


    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            
<div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4">
  <div class="hidden lg:block">
    
  </div>

  <div class="lg:col-span-2">
    <article class="mx-auto prose prose-quoteless dark:prose-invert" id="dream-single-post-main" itemscope itemtype="http://schema.org/Article">
      
  <meta itemprop="name" content="DoH && DoT">
  <meta itemprop="description" content="Experiementation avec DNS over HTTPS et DNS over TLS cette semaine. DoH est maintenant supporte par Firefox, et les prochaines version vont l’activer par default, du moins c’est ce qui avait ete annonce, jusqu’a ce que ca creer un faux scandale au UK (https://www.theregister.co.uk/2019/09/24/mozilla_backtracks_doh_for_uk_users/ ). L’avantage du support directement dans le browser viens du fait qu’il possede son propre client DNS, ce qui permet de ne pas utiliser le resolver systeme. Donc si votre destination utilise HTTPS, c’est tres dur de pouvoir vous espionnez, car l’espion peux seulement voir l’IP du destinataire.">
  <meta itemprop="datePublished" content="2019-11-12T14:58:29+00:00">
  <meta itemprop="dateModified" content="2019-11-12T14:58:29+00:00">
  <meta itemprop="wordCount" content="250">
  <meta itemprop="image" content="http://localhost:1313/img/IMG_20180730_143710.jpg">
  <meta itemprop="keywords" content="Observation,Test,Technologie,Import 2023-04-08 17:32">

      <header>
        <h1 itemprop="headline">DoH &amp;&amp; DoT</h1>
        <p class="text-sm">
          
            Tuesday, Nov 12, 2019
          

          | <span>2 minute read</span>

          
          | <span>Updated at
            
              Tuesday, Nov 12, 2019
            </span>
          
        </p>

        
        <div class="flex justify-between">
          
            <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    <span itemprop="name">Pascal Gauthier</span>
  
  </span>
</div>

          

          <div class="flex items-center gap-2">
  
  

  
  
  
  
    
  
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="" target="_blank" rel="noopener noreferrer"
      title="Share on ">
      <ion-icon class="group-hover:text-primary-content" name="logo-"></ion-icon>
    </a>
  

  
  
</div>

        </div>
      </header>

      <section id="dream-single-post-content" itemprop="articleBody">
        

        <p>Experiementation avec DNS over HTTPS et DNS over TLS cette semaine. DoH est maintenant supporte par Firefox, et les prochaines version vont l&rsquo;activer par default, du moins c&rsquo;est ce qui avait ete annonce, jusqu&rsquo;a ce que ca creer un faux scandale au UK (<a href="https://www.theregister.co.uk/2019/09/24/mozilla_backtracks_doh_for_uk_users/" target="_blank">https://www.theregister.co.uk/2019/09/24/mozilla_backtracks_doh_for_uk_users/</a>
). L&rsquo;avantage du support directement dans le browser viens du fait qu&rsquo;il possede son propre client DNS, ce qui permet de ne pas utiliser le resolver systeme. Donc si votre destination utilise HTTPS, c&rsquo;est tres dur de pouvoir vous espionnez, car l&rsquo;espion peux seulement voir l&rsquo;IP du destinataire.</p>
<p>Pour DoT, c&rsquo;est un peu plus complique, et ce tout dependant du OS, et meme de la distribution Linux. La solution la plus facile, du moins pour l&rsquo;instant, c&rsquo;est l&rsquo;utilisation de <code>stubby</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">apt show stubby
</span></span><span class="line"><span class="cl">Description: modern asynchronous DNS API (stub resolver)
</span></span><span class="line"><span class="cl"> getdns is a modern asynchronous DNS API.  It implements DNS entry
</span></span><span class="line"><span class="cl"> points from a design developed and vetted by application developers,
</span></span><span class="line"><span class="cl"> in an API specification edited by Paul Hoffman.  This API intends to
</span></span><span class="line"><span class="cl"> offer application developers a modernized and flexible way to access
</span></span><span class="line"><span class="cl"> DNS security (DNSSEC) and other powerful new DNS features; a
</span></span><span class="line"><span class="cl"> particular hope is to inspire application developers towards
</span></span><span class="line"><span class="cl"> innovative security solutions in their applications.
</span></span></code></pre></div><p>Par la suite vous modifier votre /etc/resolv.conf (probablement manager par network-manager) pour utiliser 127.0.0.1 comme serveur.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">cat /etc/resolv.conf 
</span></span><span class="line"><span class="cl"># Generated by NetworkManager
</span></span><span class="line"><span class="cl">nameserver 127.0.0.1
</span></span></code></pre></div><p>J&rsquo;utilise les serveurs de Cloudflare comme sources DNS:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">  - address_data: 1.1.1.1
</span></span><span class="line"><span class="cl">    tls_auth_name: &#34;cloudflare-dns.com&#34;
</span></span><span class="line"><span class="cl">  - address_data: 1.0.0.1
</span></span><span class="line"><span class="cl">    tls_auth_name: &#34;cloudflare-dns.com&#34;
</span></span></code></pre></div><p>Voila, vos requetes DNS sont maintenant encryptes.</p>


        
      </section>

      
      <div class="divider"></div>
      <div class="flex flex-col md:flex-row justify-between gap-4 py-4">
        
        <a role="button" class="btn btn-outline h-12" href="/posts/2019/the-mandalorian/" title="The Mandalorian">
          <ion-icon name="chevron-back"></ion-icon>
          <div class="inline-flex flex-col items-start">
            <span class="text-base-content/60 text-xs font-normal">Previous page</span>
            <span class="max-w-48 truncate">The Mandalorian</span>
          </div>
        </a>
        

        
        <a role="button" class="btn btn-outline h-12" href="/posts/2019/dark-netflix/" title="Dark (Netflix)">
          <div class="inline-flex flex-col items-end">
            <span class="text-base-content/60 text-xs font-normal">Next page</span>
            <span class="max-w-48 truncate">Dark (Netflix)</span>
          </div>
          <ion-icon name="chevron-forward"></ion-icon>
        </a>
        
      </div>
      

      
    </article>
  </div>

  <div
    x-data="tocHighlighter()"
    @scroll.window="debouncedScroll"
    class="hidden lg:flex lg:flex-col lg:items-end"
  >
    
      <nav id="TableOfContents"></nav>
    
  </div>
</div>


            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 SIG11</p>
  

  
  <p class="text-sm">
    🌱
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
  

  

  
</div>

            

            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 SIG11</p>
  

  
  <p class="text-sm">
    🌱
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme = "emerald"
  window.darkTheme = "forest"
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>

  
  
  <script src="/js/grid.js"></script>




<script src="/js/main.js"></script>

    







<script src="/js/toc.js"></script>


  
    <script type="module">
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img', {
        background: 'oklch(var(--b1))',
        margin: 24,
      })
    </script>
  






    

    

    

    

    <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js" integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin="anonymous"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js" integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin="anonymous"></script>
  </body>
</html>
